# FlowCraft web application

<p align="center">
  <img width="360" src="https://github.com/assemblerflow/flowcraft/raw/master/docs/resources/logo_large.png" alt="flowcraft_logo"/>
</p>

A companion web application for [FlowCraft](https://github.com/assemblerflow/flowcraft).

## Usage

At the moment, this web application is meant to be used through the URL links
generated by FlowCraft (you can see the docs [here](http://flowcraft.readthedocs.io/en/latest/user/basic_usage.html#in-a-browser)
and more in depth [here](http://flowcraft.readthedocs.io/en/latest/user/pipeline_inspect.html)).

## Installation

### Build

To build and run the FlowCraft web app, follow these steps. 

First, it is required that you have `python3`, `pip`, `npm` and `yarn` installed.
The installation of these packages is highly system dependent, so you'll have
to see the best option for you.

To install the python virtual env, install [pipenv](https://github.com/pypa/pipenv):
```
pip install pipenv
```

Having these basic dependencies, building the app is: 
```
git clone https://github.com/assemblerflow/flowcraft-webapp.git
# Install python dependencies for backend
cd flowcraft-webapp
pipenv install
# Install node dependencies for frontend
cd flowcraft-webapp
yarn install
```

### Run the server

To enable the [Django channel layers](https://channels.readthedocs.io/en/latest/), a redis
service must be running on a specific port. If you have `docker` installed, you can start
the service with:

```
docker run -p 6379:6379 -d redis:2.8
```

After building the web application and its dependencies, the app can be started
with:

```
# On flowcraft-webapp
pipenv shell
cd flowcraft-webapp
# On flowcraft-webapp/flowcraft-webapp
./manage.py runserver
```

This will run the app on your localhost. You can change the address by providing that 
information after `runserver`:

```
./manage.py runserver 0.0.0.0:<other_port>
```

If you get an error that the address is not allowed, add it to the `flowcraft-webapp/settings.py`:

```
ALLOWED_HOSTS = ["192.92.149.169", "localhost", "127.0.0.1", "<your_new_address>"]
```

If you need to change the redis service port, change also the `flowcraft-webapp/settings.py`:

```
CHANNEL_LAYERS = {
    'default': {
        'BACKEND': 'channels_redis.core.RedisChannelLayer',
        'CONFIG': {
            "hosts": [('<your_address>', <other_port>)],
        },
    },
}
```